<html>

<head>
  <title>SmartBots::Documentation</title>
</head>

<style>
b.code {
        font-style:italic;
        font-weight:normal;
        line-height:130%;
        margin-left:50;
        }
b.comment {
        font-style:italic;
        font-weight:normal;
        color : #777777;
        }
b.title {
        font-weight:bold;
        font-size:16;
        }
</style>

<body>
<a name="vars"><h3>Переменные</h3></a>
<b class="title">Есть 2 типа данных:</b><br>
- Указатели - в них хранится адрес объекта (танк, дерево, строение, и т.д.)<br>
- Числа - в них хранится какое-либо число, может принимать как целые, так и дробные значения.<br>
<br>
<b class="title">Правила объявления переменных:</b><br>
- Указатели :  <b class="code">var_name%</b><br>
- Числа     : <b class="code">var_name#</b><br>
<br>
При <u>первом</u> объявлении переменной следует указать ее тип.
По умолчанию тип является числовым. Т.е. строки<br>
<b class="code">var_name = value</b><b class="comment"> ; т.к. явно не указан тип, то переменная автоматически становится числом</b><br>
<b class="code">var_name# = value</b><b class="comment"> ; здесь явно указан тип переменной - числовой</b><br>
абсолютно идентичны.<br><br>
Указывать тип переменной можно только один раз, далее ее тип будет определяться автоматически :<br>
<b class="code">entity% = ScanRadar ( 1000 )</b><b class="comment"> ; явно указываем тип переменной - указатель</b><br>
<b class="code">If entity<>Enemy</b><b class="comment"> ; здесь не указываем тип, он определяется по ранее объявленному</b><br>
<b class="code">...</b><br>
<b class="code">End If</b><br>
<br><a name="ops"><hr></a>
<h3>Операторы</h3>
<b class="title">- Оператор присваивания: "="</b><br>
<b class="code">var_name = value</b><b class="comment"> ; значение value заносится в переменную var_name<br></b>
<br>
<b class="title">- Арифметические операторы: "+", "-", "/", "*", "Mod" ;<br></b>
<b class="code">var_name = value1 + value2 * ( value3 / value4 )<br></b>
<br>
<b class="title">- Условные операторы: "<", ">", "=", "<=", ">=", "<>", "And", "Or", "Not", "Xor" ;<br></b>
<br>
<b class="title">Приоритет операторов :</b>
<table border=1>
<tr><td width=200><b>Операторы</b></td><td width=100><b>Приоритет</b></td></tr>
<tr><td><b>Not</b>, унарный минус</td><td>Самый высокий</td></tr>
<tr><td><b>And</b>, <b>Or</b>, <b>Xor</b></td><td>-</td></tr>
<tr><td> *, /</td><td>-</td></tr>
<tr><td> +, -</td><td>-</td></tr>
<tr><td> =, <, >, <=, >=, <></td><td>Самый низкий</td></tr>
</table>
<br>
<br><a name="exp"><hr></a>
<h3>Условия</h3><br>
<b class="title">Синтаксис:</b><br>
<br>
<table border=1>
<tr><td align="center">
Вариант №1
</td><td align="center">Вариант №2</td>
<tr><td width=200>
<b class="code">If …</b><br>
<b class="code">   …<br></b>
<b class="code">[Else]<br></b>
<b class="code">   […]<br></b>
<b class="code">EndIf<br></b>
</td>
<td width=200>
<b class="code">If …</b><br>
<b class="code">   …<br></b>
<b class="code">[Else]<br></b>
<b class="code">   […]<br></b>
<b class="code">End If<br></b>
</td></tr>
</table>
<br>Возможна запись в одну строчку:<br>

<b class="code">If …  … [Else  … ]  EndIf</b><br>
Пример :<br>
<b class="code">If  a>b   MaxValue=a   Else   MaxValue=b   EndIf</b><br>

<br><a name="funcs"><hr></a>
<h3>Функции</h3>
<a name="funcs_radar"><b class="title">Работа с радаром :</b><br></a>
- <b>ScanRadar</b> ( angle ) - просканировать пространство в заданном направлении.<br>
- <b>PointRadar</b> ( entity ) - направляет радар на объект.<br>
<br>
<b class="title">Работа с объектами :<br></b>
- <b>EntityX</b> ( entity ), <b>EntityY</b> ( entity ), <b>EntityZ</b> ( entity ) - возвращает соответствующие координаты объекта в пространстве.<br>
- <b>EntityPitch</b> ( entity ), <b>EntityYaw</b> ( entity ), <b>EntityRoll</b> ( entity ) - возвращает соответствующие углы объекта в пространстве.<br>
- <b>EntityVisible</b> ( dest_entity ) - определяет видим ли объект ботом.<br>
- <b>EntityDistance</b> ( src_entity, dest_entity ) - возвращает расстояние между объектами.<br>
- <b>DeltaYaw</b> ( src_entity, dest_entity ) - угол, на который надо повернуть объект по оси OY, чтобы направить его на цель. <br>
- <b>DeltaPitch</b> ( src_entity, dest_entity ) - угол, на который надо повернуть объект по оси OX, чтобы направить его на цель.<br>
- <b>PositionPivot</b> ( x#,y#,z# ) - Помещает виртуальный объект Pivot по указанным координатам<br>
<br>
<b class="title">Работа с коллизиями (столкновениями) :</b><br>
- <b>CollisionX</b> ( entity ), <b>CollisionY</b> ( entity ), <b>CollisionZ</b> ( entity ) - возвращает соответствующую координату последнего места столкновения объекта.<br>
- <b>CollisionNX</b> ( entity ), <b>CollisionNY</b> ( entity ), <b>CollisionNZ</b> ( entity ) - возвращает соответствующую компоненту нормали последнего места столкновения объекта.<br>
<br>
<b class="title">Математика :</b><br>
- <b>Abs</b> ( x ) - возвращает модуль числа.<br>
- <b>Sqr</b> ( x ) - возвращает квадратный корень их числа.<br>
- <b>Sqn</b> ( x ) - возвращает знак числа.<br>
- <b>Min</b> ( x, y ) - возвращает минимальное число.<br>
- <b>Max</b> ( x, y ) - возвращает максимальное число.<br>
- <b>Sin</b> ( x ) - возвращает синус угла.<br>
- <b>Cos</b> ( x ) - возвращает косинус угла.<br>
- <b>ASin</b> ( x ) - возвращает арксинус числа.<br>
- <b>ACos</b> ( x ) - возвращает арккосинус числа.<br>
- <b>Rnd</b> ( x, y ) - возвращает случайное дробное число.<br>
- <b>Rand</b> ( x, y ) - возвращает случайное целое число.<br>
- <b>ATan2</b> ( x, y ) - возвращает арктангенс чисел.<br>
- где y,x - любые числа<br>
Функция возвращает "направление" на точку (х,у)<br>
из центра координат (0,0). Направление возвращается<br> 
в виде угла от оси Х.<br>
Эта функция крайне полезна, когда есть два<br>
обьекта и нужно повернуть один к другому.<br> 
ATan2(y2-y1,x2-x1) выдаст правильную ориентацию для обьекта1,<br>
чтобы он был направлен на обьект2.<br>
Функция возвращает значения направлений в градусах,<br>
от -180 до +180.<br>
Кроме того, обратите внимание: значения, возвращаемые<br>
ATan2(y,x) и ATan2(x,y) будут отличаться на 360 градусов.<br>

<br><a name="intvars"><hr></a>
<h3>Встроенные переменные</h3>
<b class="title">Переменные, устанавливаемые функцией ScanRadar</b><br>
- <b>Frend</b> - указатель на союзника (при командной игре), попавшего в сектор сканирования.<br>
- <b>Enemy</b> - указатель на врага, попавшего в сектор сканирования.<br>
- <b>BulletBonus</b> - указатель на бонус снарядов, попавшего в сектор сканирования.<br>
- <b>RocketBonus</b> - указатель на бонус ракеты, попавшего в сектор сканирования.<br>
- <b>RepairBonus</b> - указатель на бонус ремонта, попавшего в сектор сканирования.<br>
- <b>Obstacle</b> - расстояние до препятствия, попавшего в сектор сканирования.<br>
- <b>ObsAngle</b> - угол с препятствием, попавшим в сектор сканирования (см. рисунок).<br>
<img src='angle.JPG'>
<br>
<b class="title">Жизни, снаряды, ракеты</b><br>
- <b>MyLives</b> - жизни своего бота.<br>
- <b>Bullets</b> - количество оставшихся снарядов.<br>
- <b>Rockets</b> - количество оставшихся ракет.<br>
<br>
<b class="title">Тип игры, количество ботов, и еще одна фишка</b><br>
- <b>TypeGame</b> - тип игры : 1 - каждый сам за себя; 2 - командный бой.<br>
- <b>HowManyBots</b> - количество ботов в игре.<br>
- <b>DamageYaw</b> - индикатор повреждения, содержит угол попавшего снаряда (относительно корпуса бота), если не было повреждения - 0.<br>
<br>
<b class="title">Управление своим ботом</b><br>
- <b>TurnCorpus</b> - указывает направление поворота корпуса танка : +1 - налево, +0.5 - на половину угла поворота налево, -1 - направо.<br>
- <b>TurnGun</b> - указывает направление поднятия/опускания ствола. +1 - вверх, +0.5 - на половину угла вверх, -1 - вниз.<br>
- <b>TurnTurret</b> - указывает направление поворота башни : +1 - налево, +0.5 - на половину угла поворота налево, -1 - направо.<br>
- <b>Move</b> - указывает ускорение движения : +1-полный вперед, 0 - стоять, -1 - полный назад.<br>
- <b>Fire1</b> - указывает на команду запуска снаряда : 1 - огонь, 0 - не стрелять.<br>
- <b>Fire2</b> - указывает на команду запуска ракеты : 1 - огонь, 0 - не стрелять.<br>
<br>
<b class="title">Обработка столкновений</b><br>
- <b>Collided</b> - указатель на бота, с которым произошло столкновение.<br>
- <b>CollidedObstacle</b> - указатель на препятствие, с которым произошло столкновение.<br>
<br>
<b class="title">Указатели на модели</b><br>
- <b>Radar</b> - указатель на радар.<br>
- <b>Turret</b> - указатель на башню.<br>
- <b>Gun</b> - указатель на ствол.<br>
- <b>Corpus</b> - указатель на корпус танка.<br>
- <b>Center</b> - указатель на геометрический центр территории.<br>
- <b>Pivot</b> - указатель на вспомогательный виртуальный объект.<br>
<br>
<b class="title">Работа со стволом</b><br>
- <b>GunPitch</b> - угол поворота ствола по оси X.<br>
<br>
<b class="title">Работа с башней</b><br>
- <b>TurretYaw</b> - угол поворота башни по оси Y.<br>
<br>
<b class="title">Работа с корпусом танка</b><br>
- <b>CorpusX</b> - координата корпуса танка по оси X.<br>
- <b>CorpusY</b> - координата корпуса танка по оси Y.<br>
- <b>CorpusZ</b> - координата корпуса танка по оси Z.<br>
- <b>CorpusPitch</b> - угол корпуса танка по оси X.<br>
- <b>CorpusYaw</b> - угол корпуса танка по оси Y.<br>
- <b>CorpusRoll</b> - угол корпуса танка по оси Z.<br>
<br>
</body>

</html>